<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>首页|欢迎页</title>
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="http://cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
</head>

<body>
<div class="container">
<div class="jumbotron">
	<div class="page-header">
		<h1>标题
			<small>一些介绍</small>
		</h1>
	</div>

	<form id="form" enctype="multipart/form-data" role="form">
		<div class="form-group">
			<div class="radio">
				<label><input type="radio" name="arg_d" value="Bwd" checked>Bwd</label>
				<label><input type="radio" name="arg_d" value="Fwd">Fwd</label>
				<label><input type="radio" name="arg_d" value="Both">Both</label>
			</div>
		</div>
		
		<div class="form-group">
			<div class="radio">
				<label><input type="radio" name="arg_m" value="Symbolic" checked>Symbolic</label>
				<label><input type="radio" name="arg_m" value="Weiser">Weiser</label>
				<label><input type="radio" name="arg_m" value="SDG">SDG</label>
				<label><input type="radio" name="arg_m" value="IFDS">IFDS</label>
				<input type="file" id="file" name="sourcecode">
			</div>
		</div>

	</form>
	<button id="btnSubmit" type="button" class="btn btn-primary">提交</button>
	<button id="btnSynChk" type="button" class="btn btn-primary">Check Syntax</button>
	<div id="stdout"></div>
</div>
</div>
<script>
    $('#btnSubmit').click(function () {
        var data = new FormData();
        jQuery.each(jQuery('#file')[0].files, function (i, file) {
            data.append('file-' + i, file);
        });
        data.append('arg_d', $("input[name='arg_d']:checked").val());
        data.append('arg_m', $("input[name='arg_m']:checked").val());
        $.ajax({
            url: '{:url("Api/Phpapi/LLVMSlice")}',
            data: data,
            cache: false,
            contentType: false,
            processData: false,
            type: 'POST',
            success: function (data) {
                console.log(data);
                if (data.code == 0) {
                    $('#stdout').html('<pre>' + data.data + '</pre>');
                } else {
                    alert('error');
                }
            }
        });
    });

    $('#btnSynChk').click(function () {
        var data = new FormData();
        jQuery.each(jQuery('#file')[0].files, function (i, file) {
            data.append('file-' + i, file);
        });
        $.ajax({
            url: '{:url("Api/Phpapi/CheckSyntax")}',
            data: data,
            cache: false,
            contentType: false,
            processData: false,
            type: 'POST',
            success: function (data) {
                console.log(data);
                if (data.status === true) {
                    $('#stdout').html('<pre>' + data.message + '</pre>');
                } else {
                    alert('error');
                }
            }
        });
    });
</script>
</body>

</html>